{% extends "layout.html" %}
{% set schoolSignedIn = true %}

{% set pageHeading = 'What’s this person’s full name?' %}
{% set pageSection = " " + data.schoolName + " " %}
{% block pageTitle %}{{ macroPageTitle.pageTitle(pageHeading) }}{% endblock %}

{% block content %}

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            {{ macroPageHeader.pageHeader(pageHeading,pageSection) }}
        

            <!-- Is user coming from the CYA -->
            {% if data['cya-action'] == "change-name" %}
                <form class="form" action="check-your-answers" method="post">
                    <input type="hidden" id="cya-action" name="cya-action" value="" /><!-- Clears the cya change link action -->
            <!-- Is user coming from the details page -->
            {% elif ((data['details-change-action'] == "change-name" ) or (data['details-change-action'] == "change-name-2")) %}
                <form class="form" action="../details" method="post">
                    <input type="hidden" id="details-change-action" name="details-change-action" value="" /><!-- Clears the link action-->
                    <input type="hidden" id="details-change-action-2" name="details-change-action-2" value="" /><!-- Clears the link action-->
            {% else %}

            <!-- Add journey -->
            {% if data.participants[id].type == "ect" %}

                    {% if data['linkaction'] == "cannotFind" %}
                        {% if data.participants[id].type == "ect" %}
                            <form class="form" action="email-address" method="post">
                        {% else %}
                            <form class="form" action="know-trn" method="post">
                        {% endif %}

                            <input type="hidden" name="linkaction" id="linkaction" value="" />
                            {{ govukCheckboxes({
                                classes: "govuk-checkboxes--small govuk-visually-hidden",
                                items: [
                                    { value: "", text: "Is not matched", checked: "true" }
                                ]
                            } | decorateFormAttributes(['participants', id, 'dbMatched']) ) }}

                    {% else %}

                        <form class="form" action="teacher-reference-number" method="post">

                    {% endif %}

            {% elif data.participants[id].type == "mentor"  %}

                    {% if data['linkaction'] == "cannotFind" %}
                        {% if data.participants[id].type == "ect" or data.participants[id].type == "mentor" %}
                            <form class="form" action="email-address" method="post">
                        {% else %}
                            <form class="form" action="know-trn" method="post">
                        {% endif %}

                            <input type="hidden" name="linkaction" id="linkaction" value="" />
                            {{ govukCheckboxes({
                                classes: "govuk-checkboxes--small govuk-visually-hidden",
                                items: [
                                    { value: "", text: "Is not matched", checked: "true" }
                                ]
                            } | decorateFormAttributes(['participants', id, 'dbMatched']) ) }}
                    {% else %}

                        <form class="form" action="teacher-reference-number" method="post">

                    {% endif %}

            {% elif data.participants[id].type == "ectTransfer" or data.participants[id].type == "mentorTransfer"  %}
                    <!-- Look for if coming from cannot find in database -->
                    {% if data['linkaction'] == "cannotFind" %}
                        <form class="form" action="joining-date" method="post">
                        <input type="hidden" name="linkaction" id="linkaction" value="" />
                    <!-- Otherwise normal path -->
                    {% else %}
                        <form class="form" action="teacher-reference-number" method="post" >
                    {% endif %}
                {% endif %}
            {% endif %}

                {{ govukInput({
                    label: {
                        text: pageHeading,
                        classes: "govuk-visually-hidden",
                        isPageHeading: false
                    },
                    classes: "govuk-!-width-two-thirds"
                } | decorateFormAttributes(['participants', id, 'name']) ) }}

                {{ govukButton({
                    text: "Continue"
                }) }}

            </form>
        </div>
    </div>
{% endblock %}
