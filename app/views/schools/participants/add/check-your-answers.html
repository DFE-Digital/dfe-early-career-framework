{% extends "layout.html" %}
{% set schoolSignedIn = true %}

{% set pageHeading = "Check your answers" %}
{% set pageSection = " " + data.schoolName + " " %}
{% block pageTitle %}{{ macroPageTitle.pageTitle(pageHeading) }}{% endblock %}

{% block content %}

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            {{ macroPageHeader.pageHeader(pageHeading,pageSection) }}

            <dl class="govuk-summary-list govuk-!-margin-bottom-7">

                <!-- Name -->
                {% include "includes/summary_name.html" %}

                <!-- TRN -->
                {% include "includes/summary_trn.html" %}

                <!-- Date of birth -->
                {% if participant.dobDay %}
                    {% include "includes/summary_dob.html" %}
                {% endif %}

                <!-- Joining Date -->
                {% if participant.joiningDay %}
                    {% include "includes/summary_joining.html" %}
                {% endif %}

                <!-- Email -->
                {% if participant.email %}
                    {% include "includes/summary_email.html" %}
                {% endif %}

                <!-- Induction start date -->
                {% if participant.startDate %}
                    {% include "includes/summary_induction_start.html" %}
                {% endif %}

                <!-- Mentor details -->
                {% if participant.mentor %}
                    {% include "includes/summary_mentor.html" %}
                {% endif %}


                <!-- ECT or Mentor transferring to the school -->
                {% if participant.usingCurrentTrainingProgramme or participant.usingCurrentTrainingMaterials %}
                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        {% if data['inductionProgramme'] == "CIP" %}
                            Materials supplier
                        {% elif data['inductionProgramme'] == "FIP" %}
                            Training with
                        {% endif %}
                    </dt>
                    <dd class="govuk-summary-list__value">
                    <!-- Programme is FIP -->
                        {% if participant.usingCurrentTrainingProgramme %}
                        <ul class="govuk-list">
                            <!-- Using schools training -->
                            {% if data.participants[id].usingCurrentTrainingProgramme == "Yes" %}
                                <!-- No Match with current training -->
                                {% if data.participants[id].programmeMatch == "No" %}
                                    {% if data.participants[id].partnershipWithProvider == "Yes" %}
                                        <li>ACME Lead Provider</li>
                                        <li>ACME Delivery Partner</li>
                                    {% elif data.participants[id].partnershipWithProvider == "No" %}
                                        <li>You need to contact ACME Lead Provider</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    {% endif %}
                                <!-- Match on programme -->
                                {% else %}
                                    <li>{{ data.leadProvider}}</li>
                                    <li>{{ data.deliveryPartner }}</li>
                                {% endif %}

                            <!-- Not using schools training -->
                            {% elif data.participants[id].usingCurrentTrainingProgramme == "No" %}
                                <!-- Using schools provider but not delivery partner -->
                                {% if data.participants[id].usingCurrentProvider == "Yes" %}
                                    {% if data.participants[id].programmeMatch == "No" %}
                                        <li>{{ data.leadProvider}}</li>
                                        <li>{{ data.deliveryPartner }}</li>
                                    {% else %}
                                        <li>{{ data.leadProvider}}</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    {% endif %}
                                <!-- Not using schools provider -->
                                {% elif data.participants[id].usingCurrentProvider == "No" %}
                                    <!-- Partnership with new provider -->
                                    {% if data.participants[id].partnershipWithProvider == "Yes" %}
                                        <li>{{ participant.newLeadProvider }}</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    <!-- No partnership yet -->
                                    {% elif data.participants[id].partnershipWithProvider == "No" %}
                                        <li>You need to contact {{ participant.newLeadProvider }}</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    {% endif %}
                                {% elif data.participants[id].usingCurrentTraining == "Yes" %}

                                    <!-- Partnership with new provider -->
                                    {% if data.participants[id].partnershipWithProvider == "Yes" %}
                                        <li>{{ data.leadProvider }}</li>
                                        <li>{{ data.deliveryPartner }}</li>
                                    <!-- No partnership yet -->
                                    {% elif data.participants[id].partnershipWithProvider == "No" %}
                                        <li>You need to contact {{ data.leadProvider }}</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </ul>

                        {% elif participant.usingCurrentTrainingMaterials %}
                        <!-- Programme is CIP -->
                            <ul class="govuk-list">
                                {% if participant.usingCurrentTrainingMaterials == "Yes" %}
                                    <!-- Check if noMatch -->
                                    {% if participant.programmeMatch == "No" %}
                                        -USE DIFFERENT CURRENT
                                        <li>{{ data.leadProviderMaterials}}</li>
                                    {% else %}
                                        -CURRENT SCHOOL MATERIALS
                                        <li>{{ data.leadProviderMaterials}}</li>
                                    {% endif %}
                                <!-- Matched but using different programme  -->
                                {% elif participant.usingCurrentTrainingMaterials == "No" %}
                                -DIFFERENT MATERIAL
                                    <!-- Check if going to use schools current materials provider -->
                                    {% if participant.usingCurrentMaterials == "Yes" %}
                                        <li>{{ data.leadProviderMaterials}}</li>
                                    {% else %}
                                        <li>{{ participant.newMaterialsSupplier }}</li>
                                    {% endif %}
                                {% endif %}
                            </ul>
                        {% endif %}
                    </dd>
                    <dd class="govuk-summary-list__actions"><a class="govuk-link" href="current-providers?cya-action=change-programme-check">Change<span class="govuk-visually-hidden"> name</span></a></dd>
                </div>
            </dl>

                <!-- Not a transfer -->
                {% elif participant.usingCurrentTraining or participant.usingCurrentMaterials %}

                <div class="govuk-summary-list__row">
                    <dt class="govuk-summary-list__key">
                        {% if data['inductionProgramme'] == "CIP" %}
                            Materials supplier
                        {% elif data['inductionProgramme'] == "FIP" %}
                            Training with
                        {% endif %}
                    </dt>
                    <dd class="govuk-summary-list__value">
                        <!-- Programme is FIP -->
                        {% if participant.usingCurrentTraining %}
                        <ul class="govuk-list">
                            <!-- Using schools training -->
                            {% if data.participants[id].usingCurrentTraining == "Yes" %}
                                <li>{{ data.leadProvider}}</li>
                                <li>{{ data.deliveryPartner }}</li>
                            <!-- Not using schools training -->
                            {% elif data.participants[id].usingCurrentTraining == "No" %}
                                <!-- Using schools provider but not delivery partner -->
                                {% if data.participants[id].usingCurrentProvider == "Yes" %}
                                    <li>{{ data.leadProvider}}</li>
                                    <li>They’ll confirm the delivery partner</li>
                                <!-- Not using schools provider -->
                                {% elif data.participants[id].usingCurrentProvider == "No" %}
                                    <!-- Partnership with new provider -->
                                    {% if data.participants[id].partnershipWithProvider == "Yes" %}
                                        <li>{{ participant.newLeadProvider }}</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    <!-- No partnership yet -->
                                    {% elif data.participants[id].partnershipWithProvider == "No" %}
                                        <li>You need to contact {{ participant.newLeadProvider }}</li>
                                        <li>They’ll confirm the delivery partner</li>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </ul>

                        <!-- Programme is CIP -->
                        {% elif participant.usingCurrentMaterials %}
                        <ul class="govuk-list">
                            {% if participant.usingCurrentMaterials == "Yes" %}
                            -SCHOOL MATERIALS
                            <li>{{ data.leadProviderMaterials}}</li>
                            {% elif participant.usingCurrentMaterials == "No" %}
                            -DIFFERENT MATERIALS
                            <li>{{ participant.newMaterialsSupplier }}</li>
                            {% endif %}
                        </ul>
                        {% endif %}

                    </dd>
                    <dd class="govuk-summary-list__actions"><a class="govuk-link" href="current-providers?cya-action=change-programme-check">Change<span class="govuk-visually-hidden"> name</span></a></dd>
                </div>
            </dl>
            {% endif %}

            <form class="form" action="confirmation" method="post" >

                <!-- This will set the correct status for the participant so that they appear on the correct part of the dashboard -->
                <!-- Clears any change action from the CYA - we may not need moving forwards  -->
                {% if data['cya-action'] %}<input type="hidden" name="cya-action" id="cya-action" value="" />{% endif %}

                <!-- If transferring in -->
                {% if data.participants[id].type == "ectTransfer" or data.participants[id].type == "mentorTransfer"  %}
                    {{ govukInput({
                        classes: "govuk-!-width-two-thirds govuk-visually-hidden",
                        value: "TransferIn"
                    } | decorateFormAttributes(['participants', id, 'status']) ) }}

                <!-- Otherwise if TRN provided  -->
                {% elif participant.trnKnown == "Yes" %}
                    {{ govukInput({
                        classes: "govuk-!-width-two-thirds govuk-visually-hidden",
                        value: "Eligible"
                    } | decorateFormAttributes(['participants', id, 'status']) ) }}

                <!-- Otherwise we need to contact them -->
                {% else %}
                    {{ govukInput({
                        classes: "govuk-!-width-two-thirds govuk-visually-hidden",
                        value: "Contacted"
                    } | decorateFormAttributes(['participants', id, 'status']) ) }}
                {% endif %}

                {{ govukButton({
                    text: "Confirm and add"
                }) }}
            </form>

        </div>
    </div>
{% endblock %}
