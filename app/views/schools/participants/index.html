{% extends "layout.html" %}
{% set showBackLink = true %}
{% set showManageBackLink = true %}
{% set schoolSignedIn = true %}

{% set pageHeading = "Your ECTs and mentors" %}
{% set pageSection = " " + data.schoolName + " " %}
{% block pageTitle %}{{ macroPageTitle.pageTitle(pageHeading) }}{% endblock %}

{% block content %}

    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            {{ macroPageHeader.pageHeader(pageHeading,pageSection) }}
        </div>

        {% if not (( data['cohort'] == "2019" ) or ( data['cohort'] == "2020" )) %}
        <div class="govuk-grid-column-two-thirds">
            <p>Before your early career teachers (ECTs) and mentors can start, we need to check their details in the Teaching Regulation Agency records. This is to make sure they’re eligible for this programme.</p>
            <p>You need to tell us their names and email addresses. We’ll then contact them to <a class="govuk-link govuk-link--no-visited-state" href="what-each-person-does?link-action=view">explain their role</a> and what they need to do next.</p>

            <div class="govuk-inset-text govuk-!-margin-bottom-7">
                <ul class="govuk-list">
                    <li><a class="govuk-link govuk-link--no-visited-state" href="add/">Add an ECT or mentor</a></li>
                    <li><a class="govuk-link govuk-link--no-visited-state" href="add/yourself-as-a-mentor?participantType=sitMentor">Add yourself as a mentor</a></li>
                </ul>
            </div>
        </div>
        {% endif %}
    </div>



    {% set ectHtml %}



        {% if hasAnyContactedParticipants %}
            <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Contacted for information</h2>
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <p>We need this to check their eligibility with the Teaching Regulation Agency.</p>
                </div>
            </div>
            <table class="govuk-table govuk-!-margin-bottom-9">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                        <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                        <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                        <th class="govuk-table__header govuk-table__header--numeric" scope="col">Induction start</th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">


                    {% for id, participant in data.participants %}
                        {% if participant.status == "Contacted" and participant.type == "ect" %}
                            <tr class="govuk-table__row">
                                <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                                <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                                <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                                <td class="govuk-table__cell govuk-table__cell--numeric">{{ participant.startDate }}</td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>

        {% endif %}



        {% if hasAnyCheckingParticipants %}
        <!-- DfE checking eligibility -->
        <h2 class="govuk-heading-m govuk-!-margin-bottom-1">DfE checking eligibility</h2>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <p>We’re checking these people’s details with the Teaching Regulation Agency. We’ll confirm if they’re eligible for this programme soon.</p>
            </div>
        </div>
        <table class="govuk-table govuk-!-margin-bottom-9">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                    <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                    <th class="govuk-table__header govuk-table__header--numeric" scope="col">Induction start</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                {% for id, participant in data.participants %}
                {% if participant.status == "Checking" and participant.type == "ect" %}
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                    <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                    <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                    <td class="govuk-table__cell govuk-table__cell--numeric">{{ participant.startDate }}</td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
        {% endif %}


        {% if hasAnyCheckingQTSParticipants %}
        <!-- Checking QTS -->
        <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Checking QTS</h2>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <p>These ECTs do not have qualified teacher status (QTS) yet. They need this to be eligible for this programme. We’ll keep checking their status and notify you if something changes.</p>
            </div>
        </div>
        <table class="govuk-table govuk-!-margin-bottom-9">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                    <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                    <th class="govuk-table__header govuk-table__header--numeric" scope="col">Induction start</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                {% for id, participant in data.participants %}
                {% if participant.status == "CheckingQTS" and participant.type == "ect" %}
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                    <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                    <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                    <td class="govuk-table__cell govuk-table__cell--numeric">{{ participant.startDate }}</td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

        {% if hasAnyEligibleParticipants %}
        <!-- Eligible to start -->
        <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Training or eligible for training</h2>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                {% if data['inductionProgramme'] == "FIP" %}
                    {% if data['fipPartnership'] == "Yes" %}
                        <p>We’ve confirmed these people are eligible for this programme. We’ve given their details to your provider.</p>
                    {% else %}
                        <p>We’ve confirmed these people are eligible for this programme. Once you choose a training provider, they’ll contact your ECTs and mentors directly.</p>
                    {% endif %}
                {% elif data['inductionProgramme'] == "CIP" %}
                    <p>We’ve confirmed these people are eligible for this programme. They have access to their materials.</p>
                {% endif %}
            </div>
        </div>

        <!-- <h3 class="govuk-heading-s govuk-!-margin-bottom-1">Autumn 2021 starters</h3> -->
        <table class="govuk-table">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                    <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                    <th class="govuk-table__header govuk-table__header--numeric" scope="col">Induction start</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                {% for id, participant in data.participants %}
                {% if participant.status == "Eligible" and participant.type == "ect" %}
                <tr class="govuk-table__row">
                    <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                    <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                    <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                    <td class="govuk-table__cell govuk-table__cell--numeric">{{ participant.startDate }}</td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

    {% endset -%}
    <!-- // -->








    {% set mentorHtml %}

    {% if hasAnyContactedMentorParticipants %}

    <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Contacted for information</h2>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <p>We need this to check their eligibility with the Teaching Regulation Agency.</p>
        </div>
    </div>
    <table class="govuk-table govuk-!-margin-bottom-9">
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                <th class="govuk-table__header" scope="col">Induction start</th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            {% for id, participant in data.participants %}
            {% if participant.status == "Contacted" and participant.type == "mentor" %}
            <tr class="govuk-table__row">
                <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                <td class="govuk-table__cell">{{ participant.startDate }}</td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
    {% endif %}


    {% if hasAnyCheckingMentorParticipants %}
    <!-- DfE checking eligibility -->
    <h2 class="govuk-heading-m govuk-!-margin-bottom-1">DfE checking eligibility</h2>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <p>We’re checking these people’s details with the Teaching Regulation Agency. We’ll confirm if they’re eligible for this programme soon.</p>
        </div>
    </div>
    <table class="govuk-table govuk-!-margin-bottom-9">
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                <th class="govuk-table__header" scope="col">Induction start</th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            {% for id, participant in data.participants %}
            {% if participant.status == "Checking" and participant.type == "mentor"  %}
            <tr class="govuk-table__row">
                <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                <td class="govuk-table__cell">{{ participant.startDate }}</td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if hasAnyCheckingQTSMentorParticipants %}
    <!-- Checking QTS -->
    <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Checking QTS</h2>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <p>These ECTs do not have qualified teacher status (QTS) yet. They need this to be eligible for this programme. We’ll keep checking their status and notify you if something changes.</p>
        </div>
    </div>
    <table class="govuk-table govuk-!-margin-bottom-9">
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                <th class="govuk-table__header" scope="col">Induction start</th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            {% for id, participant in data.participants %}
            {% if participant.status == "CheckingQTS" and participant.type == "mentor"  %}
            <tr class="govuk-table__row">
                <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                <td class="govuk-table__cell">{{ participant.startDate }}</td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if hasAnyEligibleMentorParticipants %}
    <!-- Eligible to start -->
    <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Training or eligible for training</h2>
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            {% if data['inductionProgramme'] == "FIP" %}
                {% if data['fipPartnership'] == "Yes" %}
                    <p>We’ve confirmed these people are eligible for this programme. We've given their details to your provider.</p>
                {% else %}
                    <p>We’ve confirmed these people are eligible for this programme. Once you choose a training provider, they’ll contact your ECTs and mentors directly.</p>
                {% endif %}
            {% elif data['inductionProgramme'] == "CIP" %}
                <p>We’ve confirmed these people are eligible for this programme. They have access to their materials.</p>
            {% endif %}
        </div>
    </div>

    <!-- <h3 class="govuk-heading-s govuk-!-margin-bottom-1">Autumn 2021 starters</h3> -->
    <table class="govuk-table">
        <thead class="govuk-table__head">
            <tr class="govuk-table__row">
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                <th class="govuk-table__header" scope="col">Induction start</th>
            </tr>
        </thead>
        <tbody class="govuk-table__body">
            {% for id, participant in data.participants %}
            {% if participant.status == "Eligible" and participant.type == "mentor"  %}
            <tr class="govuk-table__row">
                <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                <td class="govuk-table__cell">{{ participant.startDate }}</td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% endset -%}

    {% set transferHtml %}

            {% if hasAnyTransferInParticipants %}
            <!-- Moving to the school -->
            <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Transferring to your school</h2>
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <p>You’ve told us these people are joining you from another school. You need to arrange how they’ll continue their training.</p>
                </div>
            </div>
            <table class="govuk-table govuk-!-margin-bottom-9">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                        <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                        <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                        <th class="govuk-table__header govuk-table__header--numeric" scope="col">Joining</th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    {% for id, participant in data.participants %}
                    {% if participant.status == "TransferIn" %}
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                        <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                        <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                        <td class="govuk-table__cell govuk-table__cell--numeric">
                            {{ isoDateFromDateInputs(participant['joiningYear'], participant['joiningMonth'], participant['joiningDay']) | dateWithYear }}
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}

            {% if hasAnyTransferOutParticipants %}
            <!-- Moving from the school -->
            <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Transferring from your school</h2>
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <p>You’ve told us these people are moving to a new school. Their new school will arrange how they’ll continue their training.</p>
                </div>
            </div>
            <table class="govuk-table govuk-!-margin-bottom-9">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                        <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                        <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                        <th class="govuk-table__header govuk-table__header--numeric" scope="col">Leaving</th>
                    </tr>
                </thead>
                <tbody class="govuk-table__body">
                    {% for id, participant in data.participants %}
                    {% if participant.status == "TransferOut" %}
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                        <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                        <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                        <td class="govuk-table__cell govuk-table__cell--numeric">
                            {{ isoDateFromDateInputs(participant['leavingYear'], participant['leavingMonth'], participant['leavingDay']) | dateWithYear }}
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
            {% endif %}

    {% endset -%}
    <!-- // Transfer -->

    {% set nottrainingHtml %}

        {% if hasAnyWithdrawnParticipants %}
        <!-- Withdrawn dashboard -->
        <h2 class="govuk-heading-m govuk-!-margin-bottom-1">No longer being trained</h2>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <p>Your provider reported that they’re not training the people listed below. If this is wrong, contact the relevant provider.</p>
            </div>
        </div>
        <table class="govuk-table govuk-!-margin-bottom-9">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Name</th>
                    <th class="govuk-table__header govuk-!-width-one-quarter" scope="col">Lead provider</th>
                    <th class="govuk-table__header govuk-!-width-one-third" scope="col">Delivery partner</th>
                    <th class="govuk-table__header govuk-table__header--numeric" scope="col">Induction start</th>

                </tr>
            </thead>
            <tbody class="govuk-table__body">

                {% for id, participant in data.participants %}
                    {% if participant.status == "Withdrawn" %}
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                        <td class="govuk-table__cell">{{ data.leadProvider }}</td>
                        <td class="govuk-table__cell">{{ data.deliveryPartner }}</td>
                        <td class="govuk-table__cell govuk-table__cell--numeric">{{ participant.startDate }}</td>
                    </tr>
                    {% endif %}
                {% endfor %}

                </tr>
            </tbody>
        </table>
        {% endif %}

        {% if hasAnyNotEligibleParticipants %}
        <!-- Not eligible dashboard -->
        <h2 class="govuk-heading-m govuk-!-margin-bottom-1">Not eligible for funded training</h2>
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <p>We’ve checked these people’s details and found they’re not eligible for this programme.</p>
            </div>
        </div>
        <table class="govuk-table govuk-!-margin-bottom-9">
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th class="govuk-table__header" scope="col">Name</th>
                    <th class="govuk-table__header govuk-!-width-one-quarter govuk-table__header--numeric" scope="col">Action required</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">

                {% for id, participant in data.participants %}
                    {% if participant.status == "NotEligible" %}
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell "><a href="/schools/participants/{{ id }}" class="govuk-link govuk-link--no-visited-state">{{ participant.name }}</a></td>
                        <td class="govuk-table__cell govuk-table__cell--numeric">Delete</td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
        {% endif %}

    {% endset -%}
    <!-- // Not training -->



    {{ govukTabs({
        items: [
            { label: "ECTs", id: "ect", panel: { html: ectHtml } },
            { label: "Mentors", id: "mentors", panel: { html: mentorHtml } },
            { label: "Moving school", id: "transfers", panel: { html: transferHtml } },
            { label: "Not training", id: "not-training", panel: { html: nottrainingHtml } }
        ]
    }) }}

{% endblock %}
